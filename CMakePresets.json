{
  "version": 2,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 20,
    "patch": 0
  },

  "configurePresets": [
    {
      "name": "base-make",
      "hidden": true,
      "generator": "Unix Makefiles",
      "binaryDir": "${sourceDir}/build/${presetName}",
      "cacheVariables": {
        "CMAKE_CXX_STANDARD": "14",
        "CMAKE_CXX_STANDARD_REQUIRED": "ON",

        "CMAKE_BUILD_TYPE": "RelWithDebInfo",
        "CMAKE_INSTALL_PREFIX": "$prefix",

        "BUILD_TESTING": "ON",
        "USE_CPP_11_REGEX": "ON",
        "USE_ASAN": "OFF",
        "BUILD_DEVELOPER": "OFF",
        "BIG_ARRAY_TEST": "OFF"
      }
    },

    {
      "name": "default",
      "displayName": "Default (Makefiles, RWD)",
      "inherits": "base-make"
    },
    {
      "name": "release",
      "displayName": "Release (Makefiles)",
      "inherits": "base-make",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Release",
        "BUILD_DEVELOPER": "OFF"
      }
    },
    {
      "name": "debug",
      "displayName": "Debug (Makefiles)",
      "inherits": "base-make",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug"
      }
    },
    {
      "name": "developer",
      "displayName": "Developer (flags + Debug)",
      "inherits": "base-make",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "BUILD_DEVELOPER": "ON"
      }
    },
    {
      "name": "asan",
      "displayName": "ASAN + UBSan (Debug)",
      "inherits": "base-make",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "USE_ASAN": "ON",
        "BUILD_DEVELOPER": "ON"
      }
    }
  ],

  "buildPresets": [
    {
      "name": "default",
      "configurePreset": "default"
    },
    {
      "name": "release",
      "configurePreset": "release"
    },
    {
      "name": "debug",
      "configurePreset": "debug"
    },
    {
      "name": "developer",
      "configurePreset": "developer"
    },
    {
      "name": "asan",
      "configurePreset": "asan"
    },
    {
      "name": "install",
      "configurePreset": "default",
      "targets": ["install"]
    }
  ],

  "testPresets": [
    {
      "name": "all",
      "configurePreset": "default"
    },
    {
      "name": "unit",
      "configurePreset": "default",
      "filter": {
        "includeLabel": ["unit"]
      }
    },
    {
      "name": "int",
      "configurePreset": "default",
      "filter": {
        "includeLabel": ["integration"]
      }
    },

    {
      "name": "d-all",
      "configurePreset": "developer"
    },
    {
      "name": "d-unit",
      "configurePreset": "developer",
      "filter": {
        "includeLabel": ["unit"]
      }
    },
    {
      "name": "d-int",
      "configurePreset": "developer",
      "filter": {
        "includeLabel": ["integration"]
      }
    }
  ]
}
